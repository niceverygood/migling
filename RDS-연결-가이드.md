# ğŸ—„ï¸ AWS RDS ì—°ê²° ì™„ì „ ê°€ì´ë“œ

## ğŸ“‹ í˜„ì¬ ìƒí™©
- âŒ RDS ì—”ë“œí¬ì¸íŠ¸ DNS í•´ê²° ì‹¤íŒ¨: `mingling.cluster-cf48qyyuqv7.ap-southeast-2.rds.amazonaws.com`
- âœ… ë°±ì—”ë“œ ì„œë²„ëŠ” ì •ìƒ ì‹¤í–‰ ì¤‘ (http://52.63.124.130:3001)

## ğŸ” 1ë‹¨ê³„: RDS í´ëŸ¬ìŠ¤í„° ìƒíƒœ í™•ì¸

### 1-1. AWS ì½˜ì†” ì ‘ì†
```
1. AWS Console â†’ RDS â†’ Databases
2. ë¦¬ì „: ap-southeast-2 (Sydney) í™•ì¸
3. "mingling" í´ëŸ¬ìŠ¤í„° ì°¾ê¸°
```

### 1-2. ìƒíƒœ í™•ì¸ ì²´í¬ë¦¬ìŠ¤íŠ¸
- [ ] í´ëŸ¬ìŠ¤í„° ìƒíƒœ: **Available** ì¸ì§€ í™•ì¸
- [ ] ì—”ë“œí¬ì¸íŠ¸ URL ë³µì‚¬
- [ ] Writer/Reader ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœ í™•ì¸
- [ ] VPC ë° ì„œë¸Œë„· ê·¸ë£¹ í™•ì¸

## ğŸ› ï¸ 2ë‹¨ê³„: ë¬¸ì œë³„ í•´ê²° ë°©ë²•

### ì¼€ì´ìŠ¤ A: í´ëŸ¬ìŠ¤í„°ê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°

#### A-1. ìƒˆ RDS Aurora í´ëŸ¬ìŠ¤í„° ìƒì„±
```
Engine: Aurora MySQL 8.0
Template: Dev/Test
DB cluster identifier: mingling
Master username: root  
Master password: Mingle123!
Instance class: db.t3.medium
Storage: General Purpose SSD
```

#### A-2. ë„¤íŠ¸ì›Œí¬ ì„¤ì •
```
VPC: Default VPC
Subnet group: default
Public access: YES (ì¤‘ìš”!)
VPC security group: ìƒˆë¡œ ìƒì„±
```

#### A-3. ë³´ì•ˆ ê·¸ë£¹ ì„¤ì •
```
Inbound Rules:
- Type: MYSQL/Aurora (3306)
- Protocol: TCP
- Port: 3306  
- Source: EC2 ë³´ì•ˆ ê·¸ë£¹ ID ë˜ëŠ” 0.0.0.0/0
```

### ì¼€ì´ìŠ¤ B: í´ëŸ¬ìŠ¤í„°ê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°

#### B-1. ì—”ë“œí¬ì¸íŠ¸ í™•ì¸ ë° ì—…ë°ì´íŠ¸
```bash
# EC2ì—ì„œ ì‹¤í–‰í•  ëª…ë ¹ì–´ë“¤
ssh -i mingling-key.pem ec2-user@52.63.124.130
cd ~/mingling/backend

# ì˜¬ë°”ë¥¸ ì—”ë“œí¬ì¸íŠ¸ë¡œ .env ì—…ë°ì´íŠ¸
./fix-db-connection.sh
```

#### B-2. ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ í•´ê²°
```bash
# 1. DNS í•´ê²° í…ŒìŠ¤íŠ¸
nslookup YOUR-CORRECT-ENDPOINT

# 2. í¬íŠ¸ ì—°ê²° í…ŒìŠ¤íŠ¸  
telnet YOUR-CORRECT-ENDPOINT 3306

# 3. ì§ì ‘ MySQL ì—°ê²° í…ŒìŠ¤íŠ¸
mysql -h YOUR-CORRECT-ENDPOINT -u root -p
```

## ğŸ”§ 3ë‹¨ê³„: ë³´ì•ˆ ê·¸ë£¹ ì„¤ì •

### 3-1. RDS ë³´ì•ˆ ê·¸ë£¹ ì„¤ì •
```
Group Name: mingling-rds-sg
Inbound Rules:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Type        â”‚ Protocolâ”‚ Port â”‚ Source          â”‚ Description â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MYSQL/Auroraâ”‚ TCP     â”‚ 3306 â”‚ sg-xxxxx        â”‚ From EC2    â”‚
â”‚ MYSQL/Auroraâ”‚ TCP     â”‚ 3306 â”‚ 0.0.0.0/0      â”‚ External    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3-2. EC2 ë³´ì•ˆ ê·¸ë£¹ í™•ì¸
```
ê¸°ì¡´ EC2 ë³´ì•ˆ ê·¸ë£¹ì— ë‹¤ìŒì´ ìˆëŠ”ì§€ í™•ì¸:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Type        â”‚ Protocolâ”‚ Port â”‚ Source          â”‚ Description â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Custom TCP  â”‚ TCP     â”‚ 3001 â”‚ 0.0.0.0/0      â”‚ Backend API â”‚
â”‚ SSH         â”‚ TCP     â”‚ 22   â”‚ YOUR-IP/32      â”‚ SSH Access  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ§ª 4ë‹¨ê³„: ì—°ê²° í…ŒìŠ¤íŠ¸

### 4-1. EC2ì—ì„œ ì§ì ‘ í…ŒìŠ¤íŠ¸
```bash
# 1. MySQL í´ë¼ì´ì–¸íŠ¸ë¡œ ì—°ê²°
mysql -h YOUR-ENDPOINT -u root -pMingle123!

# 2. ì„±ê³µì‹œ ë‹¤ìŒ ëª…ë ¹ì–´ë“¤ ì‹¤í–‰
SHOW DATABASES;
USE mingling;
SHOW TABLES;
EXIT;
```

### 4-2. ë°±ì—”ë“œ ì• í”Œë¦¬ì¼€ì´ì…˜ í…ŒìŠ¤íŠ¸
```bash
# 1. ë°±ì—”ë“œ ì¬ì‹œì‘
pm2 restart mingling-backend

# 2. Health Check í™•ì¸
curl http://localhost:3001/api/health

# 3. ì™¸ë¶€ì—ì„œ í™•ì¸
curl http://52.63.124.130:3001/api/health
```

## ğŸ“ 5ë‹¨ê³„: ì„±ê³µ í™•ì¸

### ì„±ê³µì‹œ ë‚˜íƒ€ë‚˜ì•¼ í•  ê²°ê³¼:
```json
{
  "status": "healthy",
  "db": "connected",
  "timestamp": "2025-06-27T...",
  "database": {
    "host": "your-endpoint",
    "database": "mingling",
    "connectionLimit": 5
  },
  "server": {
    "uptime": 123.456,
    "memory": {...},
    "version": "v18.20.8",
    "environment": "production"
  }
}
```

## ğŸš¨ ì¼ë°˜ì ì¸ ë¬¸ì œë“¤

### DNS í•´ê²° ì‹¤íŒ¨ (NXDOMAIN)
- ì—”ë“œí¬ì¸íŠ¸ URL ì˜¤íƒ€ í™•ì¸
- ë¦¬ì „ì´ ap-southeast-2ì¸ì§€ í™•ì¸  
- í´ëŸ¬ìŠ¤í„°ê°€ ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸

### ì—°ê²° ê±°ë¶€ (Connection refused)
- ë³´ì•ˆ ê·¸ë£¹ 3306 í¬íŠ¸ ì˜¤í”ˆ í™•ì¸
- RDS í¼ë¸”ë¦­ ì•¡ì„¸ìŠ¤ í™œì„±í™” í™•ì¸
- VPC/ì„œë¸Œë„· ì„¤ì • í™•ì¸

### ì¸ì¦ ì‹¤íŒ¨ (Access denied)
- ì‚¬ìš©ìëª…: root í™•ì¸
- ë¹„ë°€ë²ˆí˜¸: Mingle123! í™•ì¸
- MySQL ì‚¬ìš©ì ê¶Œí•œ í™•ì¸

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„
1. ë¨¼ì € AWS ì½˜ì†”ì—ì„œ RDS ìƒíƒœ í™•ì¸
2. ìœ„ ê°€ì´ë“œì— ë”°ë¼ ë‹¨ê³„ë³„ í•´ê²°
3. ë¬¸ì œ ë°œìƒì‹œ êµ¬ì²´ì  ì—ëŸ¬ ë©”ì‹œì§€ ê³µìœ  